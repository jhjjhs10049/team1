# Queue 방식 1:1 채팅 테스트 체크리스트

## ✅ 기본 기능 테스트
- [ ] 사용자 A → 사용자 B 메시지 전송
- [ ] 사용자 B → 사용자 A 메시지 전송  
- [ ] 실시간 메시지 수신 확인
- [ ] 메시지 중복 수신 방지 확인

## ✅ 관리자 기능 테스트
- [ ] 관리자가 채팅방 상태 변경 (대기중 → 상담중)
- [ ] 관리자가 채팅방 종료 (상담중 → 종료됨)
- [ ] 상태 변경 시 사용자에게 실시간 알림
- [ ] 관리자 페이지에서 전체 채팅방 목록 실시간 업데이트

## ✅ 다중 세션 테스트
- [ ] 같은 사용자가 여러 탭에서 접속
- [ ] 메시지가 모든 탭에서 수신되는지 확인
- [ ] 웹소켓 연결 상태 확인

## ✅ 예외 상황 테스트
- [ ] 웹소켓 연결 끊김 후 재연결
- [ ] 서버 재시작 후 웹소켓 재연결
- [ ] 네트워크 불안정 상황에서의 메시지 전송

## 🔧 Queue 방식 동작 원리

### Before (Topic 방식)
```
사용자A ──┐
          ├── /topic/chat/123 ──→ 모든 구독자가 수신
사용자B ──┘
```

### After (Queue 방식)  
```
사용자A ──→ /queue/chat/123 ──→ 한 명만 수신 (라운드로빈)
사용자B ──→ /queue/chat/123 ──→ 한 명만 수신 (라운드로빈)
```

## 💡 현재 구현의 특징

1. **메시지 브로커 분리**:
   - 1:1 채팅: `/queue/chat/{roomNo}` 
   - 상태 알림: `/queue/chat/{roomNo}/status`
   - 관리자 알림: `/topic/chat/admin/status` (브로드캐스트)

2. **Simple Broker 사용**:
   - 개발환경에 적합한 인메모리 브로커
   - 운영환경에서는 RabbitMQ/ActiveMQ 고려

3. **웹소켓 연결 관리**:
   - JWT 토큰 기반 인증
   - 자동 재연결 기능
   - 구독 상태 관리
